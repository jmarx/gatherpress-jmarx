(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const t=window.React,n=window.wp.i18n,a=window.wp.domReady;var r=e.n(a);const s=window.wp.element,l=window.wp.components,o=window.wp.apiFetch;var i=e.n(o);function c(e){if("object"==typeof GatherPress)return e.split(".").reduce(((e,t)=>e&&e[t]),GatherPress)}window.wp.data;const d=()=>{const[a,r]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[g,w]=(0,s.useState)(!1),[b,_]=(0,s.useState)(!1),[E,f]=(0,s.useState)(!1),[C,S]=(0,s.useState)(""),x=()=>r(!1);return(0,s.useEffect)((()=>{o?(_(!0),m(!1),p(!1),w(!1)):_(!1),f(!(o||u||h||g))}),[o,u,h,g]),((e,t="")=>{for(const[n,a]of Object.entries(e)){let e=n;t&&(e+="_"+String(t)),addEventListener(e,(e=>{a(e.detail)}),!1)}})({setOpen:r}),(0,t.createElement)(t.Fragment,null,a&&(0,t.createElement)(l.Modal,{title:(0,n.__)("Notify members via email","gatherpress"),onRequestClose:x,shouldCloseOnClickOutside:!1},(0,t.createElement)(l.TextareaControl,{label:(0,n.__)("Optional message","gatherpress"),value:C,onChange:e=>S(e)}),(0,t.createElement)("p",{className:"description"},(0,n.__)("Select the recipients for your message by checking the relevant boxes.","gatherpress")),(0,t.createElement)(l.Flex,{gap:"8"},(0,t.createElement)(l.FlexItem,null,(0,t.createElement)(l.CheckboxControl,{label:(0,n._x)("All Members","List Status","gatherpress"),checked:o,onChange:d})),(0,t.createElement)(l.FlexItem,null,(0,t.createElement)(l.CheckboxControl,{label:(0,n._x)("Attending","List Status","gatherpress"),checked:u,onChange:m,disabled:b})),(0,t.createElement)(l.FlexItem,null,(0,t.createElement)(l.CheckboxControl,{label:(0,n._x)("Waiting List","List Status","gatherpress"),checked:h,onChange:p,disabled:b})),(0,t.createElement)(l.FlexItem,null,(0,t.createElement)(l.CheckboxControl,{label:(0,n._x)("Not Attending","List Status","gatherpress"),checked:g,onChange:w,disabled:b}))),(0,t.createElement)("br",null),(0,t.createElement)(l.Button,{variant:"primary",onClick:()=>{e.g.confirm((0,n.__)("Confirm you are ready to send?","gatherpress"))&&i()({path:c("urls.eventRestApi")+"/email",method:"POST",data:{post_id:c("eventDetails.postId"),message:C,send:{all:o,attending:u,waiting_list:h,not_attending:g},_wpnonce:c("misc.nonce")}}).then((e=>{e.success&&(x(),S(""),d(!1),m(!1),p(!1),w(!1))}))},disabled:E},(0,n.__)("Send Email","gatherpress"))))};r()((()=>{const e=document.getElementById("gatherpress-event-communication-modal");e&&(0,s.createRoot)(e).render((0,t.createElement)(d,null))}))})();